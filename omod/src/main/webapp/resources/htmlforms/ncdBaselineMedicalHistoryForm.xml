<htmlform
        formUuid="06807e2b-ce97-4d65-8796-e955fcbe057d"
        formEncounterType="fa6f3ff5-b784-43fb-ab35-a08ab7dbf074"
        formName="Medical History"
        formDescription="Personal and family history for NCD baseline consultation"
        formVersion="1.1" formAddMetadata="yes"
        formUILocation="patientDashboard.visitActions">
    <!-- Autogenerated example form  (template from 01-Nov-2010 -->
    <macros>
        paperFormId = (Fill this in)
        headerColor =#009d8e
        fontOnHeaderColor = white
    </macros>

    <div class="wrapper">
        <uiInclude provider="msfcore" fragment="leftMenu"/>
        <div class="right-form-display">

            <div style="display:none;">
                <section headerLabel="Encounter Details">
                    <table class="baseline-aligned">
                        <tr>
                            <td>Date:</td>
                            <td>
                                <encounterDate default="now" disallowMultipleEncountersOnDate="block"/>
                            </td>
                        </tr>
                        <tr>
                            <td>Location:</td>
                            <td>
                                <encounterLocation default="SessionAttribute:emrContext.sessionLocationId"/>
                            </td>
                        </tr>
                        <tr>
                            <td>Provider:</td>
                            <td>
                                <encounterProvider default="currentUser"/>
                            </td>
                        </tr>
                    </table>
                </section>
            </div>

            <div class="sections-container">

                <section><!--MEDICAL HISTORY-->

                    <h3>
                        <a name="medicalhistory">1. Medical history</a>
                    </h3>
                    <h5>History of atherosclerotic vascular disease (ASCVD):</h5>
                    <p>
                        <i>- these patients must be on aspirin + statin</i>
                    </p>
                    <table width="90%">
                        <tr>
                            <td width="30%">
                                <obs conceptId="MSF:DBCC219B-76B8-44A8-A371-2B17E6EA107A" labelText="Angina"
                                     id="antecedents_angina_pectoris" style="checkbox"/>
                            </td>
                            <td width="30%">
                                <obs conceptId="MSF:FFAA1C14-D8C5-40DE-B336-7244D0B62A6E" labelText="MI"
                                     id="antecedents_MI"
                                     style="checkbox"/>
                            </td>
                            <td width="30%">
                                <obs conceptId="MSF:341072E2-40EF-4BF4-A250-8D0CE0957A8C" labelText="CABG"
                                     id="antecedents_CABG"
                                     style="checkbox"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <obs conceptId="MSF:B3D3C626-C4CC-4067-8587-8DBAD8134200" labelText="Angioplasty"
                                     id="antecedents_Angioplasty" style="checkbox"/>
                                <!--<lookup expression="fn.getConcept('MSF:B3D3C626-C4CC-4067-8587-8DBAD8134200').name" />-->
                            </td>
                            <td>
                                <obs conceptId="MSF:EEA48CF0-D33C-4115-9271-63A80045301B" labelText="CVA"
                                     id="antecedents_CVA"
                                     style="checkbox"/>
                                <!--<lookup expression="fn.getConcept('MSF:EEA48CF0-D33C-4115-9271-63A80045301B').name" />-->
                            </td>
                            <td>
                                <obs conceptId="MSF:63872D45-53D7-41FF-B689-155B5823A8DC"
                                     labelText="Carotid endarterectomy"
                                     id="antecedents_carotid_endarterectomy" style="checkbox"/>
                                <!--<lookup expression="fn.getConcept('MSF:63872D45-53D7-41FF-B689-155B5823A8DC').name" />-->
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <obs conceptId="MSF:D8533C83-6087-45AA-AD8E-7726142542E0" labelText="Claudication"
                                     id="antecedents_claudication" style="checkbox"/>
                                <!--<lookup expression="fn.getConcept('MSF:D8533C83-6087-45AA-AD8E-7726142542E0').name" />-->
                            </td>
                            <td>
                                <obs conceptId="MSF:779CEFEA-E7EC-4B0A-B83A-3458AA4820F5"
                                     labelText="Ischaemic ulcer amputation"
                                     id="antecedents_ischaemic_ulcer_amputation" style="checkbox"/>
                                <!--<lookup expression="fn.getConcept('MSF:779CEFEA-E7EC-4B0A-B83A-3458AA4820F5').name" />-->
                            </td>
                            <td>
                                &#160;
                            </td>
                        </tr>
                    </table>

                    <h5>History of target organ damage:</h5>

                    <table width="90%">
                        <tr>
                            <td width="30%">
                                <obs conceptId="MSF:979B865F-44D9-46E8-9AE6-3457952B5880" labelText="Heart failure"
                                     id="antecedents_heart_failure" style="checkbox"/>
                                <!--<lookup expression="fn.getConcept('MSF:979B865F-44D9-46E8-9AE6-3457952B5880').name" />-->
                            </td>
                            <td width="30%">
                                <obs conceptId="MSF:86A85208-8E02-425A-AF15-0D2F2234EC2C"
                                     labelText="Left ventricular hypertrophy"
                                     id="antecedents_left_ventricular_hypertrophy" style="checkbox"/>
                                <!--<lookup expression="fn.getConcept('MSF:86A85208-8E02-425A-AF15-0D2F2234EC2C').name" />-->
                            </td>
                            <td width="30%">
                                <obs conceptId="MSF:5F457C57-8747-4817-A2FA-26BC2A6B438E" labelText="Retinopathy"
                                     id="antecedents_retinopathy" style="checkbox"/>
                                <!--<lookup expression="fn.getConcept('MSF:5F457C57-8747-4817-A2FA-26BC2A6B438E').name" />-->
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <obs conceptId="MSF:E889434F-3CB9-47B6-942A-6D714ECB8899" labelText="Renal failure"
                                     id="antecedents_renal_failure" style="checkbox"/>
                                <!--<lookup expression="fn.getConcept('MSF:E889434F-3CB9-47B6-942A-6D714ECB8899').name" />-->
                            </td>
                            <td>
                                <obs conceptId="MSF:7ABB956F-81FA-4CB2-9D7D-6136B1CBF1F1"
                                     labelText="Diabete + renal impairment"
                                     id="antecedents_diabetes_renal_impairment" style="checkbox"/>
                                <!--<lookup expression="fn.getConcept('MSF:7ABB956F-81FA-4CB2-9D7D-6136B1CBF1F1').name" />-->
                            </td>
                            <td>
                                <obs conceptId="MSF:40D2D1D7-1382-42D6-8719-67C0757E4D3C"
                                     labelText="Hypertension + renal impairment"
                                     id="antecedents_hypertension_renal_impairment"
                                     style="checkbox"/>
                                <!--<lookup expression="fn.getConcept('MSF:40D2D1D7-1382-42D6-8719-67C0757E4D3C').name" />-->
                            </td>
                        </tr>

                    </table>

                    <h5>Cardiovascular risk score:</h5>
                    <table>
                        <tr>
                            <td class="left-th" width="18%">
                                <span>
                                    <lookup expression="fn.getConcept('a2c36065-0377-435c-b06f-c48e4a609ee4').name"/>
                                </span>
                            </td>
                            <td width="82%">
                                <obs conceptId="a2c36065-0377-435c-b06f-c48e4a609ee4" answerConceptIds="14dd482d-a42b-46d0-bb14-4d3f8c743f32,65faaf98-3caf-47d0-8b92-6bb1d222ad9c,256de010-3614-4e1c-91fa-183236c6e7f2,3b3db397-ed73-4250-84b0-0feabcb4f498,5c6ac484-0ebb-4e81-83e2-e42b801810a5"
                                     style="radio"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="left-th">
                                <span>
                                    <lookup expression="fn.getConcept('8e31892a-57da-42b2-94b6-a5776e1c7fa8').name"/>
                                </span>
                            </td>
                            <td>
                                <obs conceptId="8e31892a-57da-42b2-94b6-a5776e1c7fa8" answerConceptIds="14dd482d-a42b-46d0-bb14-4d3f8c743f32,65faaf98-3caf-47d0-8b92-6bb1d222ad9c,256de010-3614-4e1c-91fa-183236c6e7f2,3b3db397-ed73-4250-84b0-0feabcb4f498,5c6ac484-0ebb-4e81-83e2-e42b801810a5"
                                     style="radio"/>
                            </td>
                        </tr>
                    </table>


                    <h5>Other past medical history</h5>
                    <obs conceptId="160221" rows="4" cols="60"/>
                    <!--<textarea cols="60" rows="6" placeholder="Write in as much details any other past medical history"></textarea>-->


                    <h5>Family history</h5>
                    <table width="90%">
                        <tr>
                            <td>
                                <obs conceptId="23b6f689-0484-4b5f-8094-2d83ce733335" answerConceptId="5108a071-b9b6-4405-8afa-9f7657b247b9" answerLabel="Diabetes"
                                     style="checkbox"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <obs conceptId="23b6f689-0484-4b5f-8094-2d83ce733335" answerConceptId="2e7b4eb2-a6c9-4d8f-9734-2832d0706066" answerLabel="Premature CV Event &lt;50"
                                     style="checkbox"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <obs conceptId="23b6f689-0484-4b5f-8094-2d83ce733335" answerConceptId="135315" answerLabel="Malignant Hyperthermia"
                                     style="checkbox"/>
                            </td>
                        </tr>
                    </table>
                </section>
            </div>
            <submit submitLabel="Next >"/>
        </div>
    </div>

    <!-- When this form is saved forward to the Family History Form -->
    <!-- TODO: Fix the url of all the forms to display their contents once done -->

    <!-- Enusre that only one version of this form can exist at any one time -->
    <ifMode mode="ENTER" include="true">
        <lookup complexExpression="
            #set( $encounter = 0 )
            #set( $encounter = $fn.allEncounters('fa6f3ff5-b784-43fb-ab35-a08ab7dbf074'))
            #foreach($encounter in $fn.allEncounters(null))
                #if( $encounter.form.uuid == '06807e2b-ce97-4d65-8796-e955fcbe057d' )
                    &lt;script type=&quot;text/javascript&quot;>
                        window.location.href = window.location.protocol + &quot;//&quot; + window.location.host + &quot;/&quot;+ OPENMRS_CONTEXT_PATH + &quot;/htmlformentryui/htmlform/editHtmlFormWithStandardUi.page?formUuid=$encounter.form.uuid&amp;patientId=$patient.uuid&amp;encounterId=$encounter.uuid&amp;&quot;;
                    &lt;/script>
                #end
            #end"/>

    </ifMode>
    <redirectOnSave
            url="/htmlformentryui/htmlform/enterHtmlFormWithStandardUi.page?formUuid=3209cd5f-656e-42f4-984e-ab466a5b77ef&amp;patientId={{patient.id}}&amp;visitId={{visit.id}}" />
</htmlform>